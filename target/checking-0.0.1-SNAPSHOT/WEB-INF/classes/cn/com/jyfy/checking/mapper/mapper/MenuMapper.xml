<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.jyfy.checking.mapper.MenuMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="cn.com.jyfy.checking.entity.MenuDO">
        <id column="MENU_ID" property="menuId" />
        <result column="PARENT_ID" property="parentId" />
        <result column="MENU_NAME" property="menuName" />
        <result column="IMAGE_URL" property="imageUrl" />
        <result column="URL" property="url" />
        <result column="CREATE_TIME" property="createTime" />
        <result column="ORD" property="ord" />
        <result column="ROLE_ID" property="roleId" />
        <result column="CRE" property="cre" />
        <result column="SEL" property="sel" />
        <result column="UPD" property="upd" />
        <result column="DEL" property="del" />
        <result column="DOWNLOAD" property="download" />
        <result column="UPLOAD" property="upload" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        MENU_ID, PARENT_ID, MENU_NAME, IMAGE_URL, URL, CREATE_TIME, ORD, ROLE_ID
    </sql>

    <select id="getMenu" resultMap="BaseResultMap">
        select c.MENU_ID MENU_ID, c.PARENT_ID PARENT_ID, c.MENU_NAME MENU_NAME, c.IMAGE_URL IMAGE_URL, c.URL URL, c.CREATE_TIME CREATE_TIME, c.ORD ORD, a.ROLE_ID ROLE_ID,
               b.sel,b.upd,b.cre,b.del,b.download,b.upload
        from cs_users a left join cs_menu_permission b on a.role_id = b.role_id
        left join cs_menu c on b.menu_id = c.menu_id
        where a.jnum = '${jnum}' and c.server = ${server} and a.state = 1
        order by ord
    </select>


</mapper>
